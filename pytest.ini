# Pytest configuration for Tempus
# NOTE: Tests require Python 3.10+ (uses type union syntax like `datetime | None`)
# Run with: docker compose run --rm web pytest tests/ -v
# Or locally with Python 3.10+: python -m pytest tests/ -v

[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
addopts = -v --tb=short
env =
    APP_ENV=testing
    DATABASE_URL=sqlite+aiosqlite:///./test.db
    SECRET_KEY=test-secret-key-for-testing-only
    JWT_SECRET_KEY=test-jwt-secret-key-for-testing
    TWITTER_CLIENT_ID=test-client-id
    TWITTER_CLIENT_SECRET=test-client-secret
    TWITTER_REDIRECT_URI=http://localhost:8000/twitter/callback
    ENCRYPTION_KEY=dGVzdC1lbmNyeXB0aW9uLWtleS0zMi1ieXRlcw==
